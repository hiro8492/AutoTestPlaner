{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "TestDesignIR",
  "description": "Test Design Intermediate Representation (IR) - LLM output schema",
  "type": "object",
  "required": ["suite", "rows"],
  "additionalProperties": false,
  "properties": {
    "suite": {
      "type": "object",
      "required": ["name", "coverage_level"],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string",
          "description": "テストスイート名"
        },
        "coverage_level": {
          "type": "string",
          "enum": ["smoke", "regression", "full"],
          "description": "テスト度合い"
        },
        "assumptions": {
          "type": "array",
          "items": { "type": "string" },
          "description": "LLMが判断できなかった前提条件"
        },
        "notes": {
          "type": "string",
          "description": "スイート全体への補足"
        }
      }
    },
    "rows": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["Case", "Step", "Expected", "Tag", "Priority", "remarks"],
        "additionalProperties": false,
        "properties": {
          "Case": {
            "type": "string",
            "description": "テストケース名"
          },
          "Step": {
            "type": "string",
            "description": "テストステップの操作内容"
          },
          "Expected": {
            "type": "string",
            "description": "期待結果"
          },
          "Tag": {
            "type": "string",
            "description": "タグ（複数は | 区切り）"
          },
          "Priority": {
            "type": "string",
            "enum": ["High", "Medium", "Low"],
            "description": "優先度"
          },
          "remarks": {
            "type": "string",
            "description": "備考"
          }
        }
      }
    }
  }
}
